{"version":3,"sources":["main.ts"],"names":[],"mappings":";;AAAA,2BAA6B;AAE7B,2BAA6B;AAE7B,uBAAyB;AACzB,iCAAmC;AACnC,wCAA0C;AAC1C,+BAAiC;AAIjC,IAAM,OAAO,GAAG,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC;AAC/E,IAAM,IAAI,GAAG,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC;AAC5E,IAAM,GAAG,GAAG,OAAO,EAAE,CAAC;AACtB,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;AAC3B,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;AAExB,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,UAAC,GAAG,EAAE,GAAG;IACxB,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC,CAAC;AACxD,CAAC,CAAC,CAAC;AACH,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,UAAC,GAAoB,EAAE,GAAqB,EAAE,IAA0B;IACpF,IAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;IACxB,IAAM,IAAI,GAAa,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;IACvG,IAAI,IAAI,GAAe,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;IAC5D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;IACtC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;IAChC,IAAI,MAAgB,CAAC;IACrB,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IACzB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;QAC7C,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,CAAC;IACD,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,iBAAiB,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;IAClF,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AACtB,CAAC,CAAC,CAAC;AACH,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC;AAElE,IAAM,IAAI,GAAG,IAAI,CAAC;AAClB,IAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE;IACrD,OAAO,CAAC,GAAG,CAAC,yBAAyB,GAAG,IAAI,CAAC,CAAC;AAChD,CAAC,CAAC,CAAC;AACH,iGAAiG;AACjG,mDAAmD;AACnD,MAAM","file":"main.js","sourcesContent":["import * as path from 'path';\r\nimport * as https from 'https';\r\nimport * as http from 'http';\r\nimport * as child from 'child_process';\r\nimport * as fs from 'fs';\r\nimport * as express from 'express';\r\nimport * as bodyparser from 'body-parser';\r\nimport * as morgan from 'morgan';\r\n\r\nimport * as itf from './interfaces';\r\n\r\nconst privKey = fs.readFileSync(path.join(__dirname, '../../x509/server.pem'));\r\nconst cert = fs.readFileSync(path.join(__dirname, '../../x509/server.crt'));\r\nconst app = express();\r\napp.use(bodyparser.json());\r\napp.use(morgan('tiny'));\r\n\r\napp.get('/data', (req, res) => {\r\n  res.sendFile(path.join(__dirname, '../updates.json'));\r\n});\r\napp.post('/', (req: express.Request, res: express.Response, next: express.NextFunction) => {\r\n  const date = new Date();\r\n  const file: itf.Root = JSON.parse(fs.readFileSync(path.join(__dirname, '../updates.json')).toString());\r\n  let newv: itf.Update = JSON.parse(JSON.stringify(req.body));\r\n  newv.time = date.toLocaleTimeString();\r\n  newv.date = date.toDateString();\r\n  let result: itf.Root;\r\n  result.updates[0] = newv;\r\n  for (let i = 0; i < file.updates.length; i++) {\r\n    result.updates.push(file.updates[i]);\r\n  }\r\n  fs.writeFileSync(path.join(__dirname, '../updates.json'), JSON.stringify(result));\r\n  res.sendStatus(200);\r\n});\r\napp.use('/', express.static(path.join(__dirname, '../ng2/dist')));\r\n\r\nconst port = 2526;\r\nconst httpserver = http.createServer(app).listen(port, () => {\r\n  console.log('Server running on port ' + port);\r\n});\r\n// const httpsserver = https.createServer({ key: privKey, cert: cert }, app).listen(port, () => {\r\n//   console.log('Server running on port ' + port);\r\n// });\r\n"],"sourceRoot":"e:\\Git\\fuettr-website\\server"}